<nav class="nav">
    <h1><a routerLink="">E-Comm</a></h1>
    
    <!-- Sección de Búsqueda: Usa @if en lugar de *ngIf -->
    @if (menuType() !== 'seller') {
        <div class="nav-search">
            <input  type="text" #searchInput (keyup)="searchProduct($event)"  
                  (blur)="hideSearch()"  placeholder="Search Products" />
                  
            <button (click)="submitSearch(searchInput.value)">Search SELLER JD</button>
            
            <!-- Sugerencias de Búsqueda: Usa @if y @for -->
            @if (searchResult()) {
                <ul class="suggested-search">
                    @for (item of searchResult(); track item.id) {
                        <li>
                            <a (mousedown)="redirectToDetails(item.id)">{{ item.name }}</a>
                        </li>
                    }
                </ul>
            }
        </div>
    }

    <!-- Navegación Principal: Usa @switch -->
    @switch (menuType()) {
        @case ('default') {
            <ul>
                <li><a routerLink="seller-auth">Seller</a></li>
                <li><a routerLink="">Home</a></li>
                <li><a routerLink="user-auth">Login/Sign-up</a></li>
                <!-- Acceso a signals con el operador () -->
                <li><a href="#">Cart({{ cartItems() }})</a></li>
            </ul>
        }
        @case ('user') {
            <ul>
                <li><a routerLink="seller-auth">Seller</a></li>
                <li><a routerLink="">Home</a></li>
                <!-- CORREGIDO: Llama a userName() antes del pipe -->
                <li><a>{{ userName() | titlecase }}</a></li>
                <li><a routerLink="my-orders">My Orders</a></li>
                <li><a (click)="userLogout()">Logout</a></li>
                
                <!-- Enlace de carrito condicional: Acceso a signals con el operador () -->
                <li>
                    <a [routerLink]="cartItems() > 0 ? 'cart-page' : null">
                        Cart({{ cartItems() }})
                    </a>
                </li>
            </ul>
        }
        @case ('seller') {
            <ul>
                <li><a routerLink="seller-add-product">Add Product</a></li>
                <li><a routerLink="seller-home">List</a></li>
                <li><a (click)="logout()">Logout</a></li>
                <!-- CORREGIDO: Llama a sellerName() antes del pipe -->
                <li><a href="#">{{ sellerName() | titlecase }}</a></li>
            </ul>
        }
    }
</nav>
